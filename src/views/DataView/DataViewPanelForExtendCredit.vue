<template>
  <div
    ref="profitLossRef"
    class="profit-loss data-view-panel"
    style="padding-left:0;padding-right:0"
  >
    <header style="display:flex;justify-content:space-between;margin-left:20px">
      <DataViewTitle>测试3</DataViewTitle>
    </header>
    <main style="margin-top:10px">
      <div style="position:absolute;margin-top:23px;margin-left:20px">
        <DataViewDescBox
          descTitle="descTitle1"
          descVal="1"
          descUnit="亿"
        ></DataViewDescBox>
        <DataViewDescBox
          style="margin-top:20px"
          descTitle="descTitle2"
          descVal="1"
          descUnit="亿"
        ></DataViewDescBox>
        <DataViewDescBox
          style="margin-top:20px"
          descTitle="descTitle3"
          descVal="1"
          descUnit="个"
        ></DataViewDescBox>
      </div>
      <ChartModel
        :chartOptions="chartOptions"
        :minHeight="250"
        :key="chartKey"
      ></ChartModel>
    </main>
  </div>
</template>

<script>
// 引入公共组件
import ChartModel from './components/DataViewChartModel'
import DataViewTitle from './components/DataViewTitle.vue'
import DataViewDescBox from './components/DataViewDescBox'
import { getChartForPercentageOptions } from '@/utils/echartOptions/echartOptionsForPie'

export default {
  name: 'DataViewPanelForExtendCredit',

  components: { ChartModel, DataViewTitle, DataViewDescBox },

  data () {
    return {
      // 图表配置
      chartOptions: null,
      // 用于图表强制刷新
      chartKey: 0
    }
  },

  methods: {
    // 初始化echarts
    initChartOption () {
      const chartData = []
      const positionConfigs = ['62%', '50%']
      const isShowVal = true
      this.chartOptions = getChartForPercentageOptions({
        chartData,
        positionConfigs,
        isShowVal
      })
      this.chartKey++
    }
  },

  mounted () {
    this.initChartOption()
  }
}
</script>
